<!DOCTYPE html>
<html>
    <head>
        <script src = 'urlParameters.js'></script>
        <script>
            function setTitle(str) {
                document.title = `Slack | ${str}`;
            }

            function setDisplay(ID, value) {
                document.getElementById(ID).style.display = value;
            }

            function toggleCollapse(t) {
                let contentID = t.id.split('Title').join('Content');
                let titleMaxID = t.id + 'Max';
                let titleMinID = t.id + 'Min';

                if (document.getElementById(contentID).style.display === 'none') {
                    setDisplay(contentID, 'block');
                    setDisplay(titleMaxID, 'block');
                    setDisplay(titleMinID, 'none');
                } else {
                    setDisplay(contentID, 'none');
                    setDisplay(titleMaxID, 'none');
                    setDisplay(titleMinID, 'block');
                }
            }

        </script>
        <script async type = "module">
            import { jml, jml_nester } from './jml.mjs'
            import { loadData } from './loadData.mjs'
            
            import { applyWidgetJml } from './widgetJml.mjs';
            import { channelsWidgetJml } from './channelsWidget.mjs';

            const ARCHIVE_DATA = await loadData('./VIEWERDATA', 'VIEWERDATA_map.json'); 
            init(ARCHIVE_DATA.CHANNELS_ARR);

            async function init(chansArr) {
                document.tile = ARCHIVE_DATA.ARCHIVE_NAME;
                document.querySelector('#heading').innerHTML = ARCHIVE_DATA.ARCHIVE_NAME;

                applyWidgetJml('#channels', channelsWidgetJml, ARCHIVE_DATA, null);
            }

        </script>
        <link rel="stylesheet" href="main.css">
        <link rel="stylesheet" href="memberPane.css">
    </head>
    <body>
        <h1 id = 'heading'></h1>
        <div id = 'channels'></div>
    </body>
</html>